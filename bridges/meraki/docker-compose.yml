# Generated by trellis -- regenerated on each build
# Bridge: meraki v2026.02.19.1
services:
  meraki:
    image: bridge-meraki:latest
    build: .
    container_name: bridge-meraki
    hostname: bridge-meraki
    restart: unless-stopped
    volumes:
      - meraki-tendril:/opt/tendril
      - meraki-data:/opt/bridge/data
    environment:
      - TZ=UTC
      - TENDRIL_INSTALL_KEY=${TENDRIL_INSTALL_KEY}
      - TENDRIL_DOWNLOAD_URL=${TENDRIL_DOWNLOAD_URL}
      - MERAKI_API_KEY=${MERAKI_API_KEY}
    healthcheck:
      test: ["CMD-SHELL", "python3 /opt/bridge/data/tools/meraki_check.py --quick || exit 1"]
      interval: 60s
      timeout: 10s
      retries: 3

volumes:
  meraki-tendril:
  meraki-data:
